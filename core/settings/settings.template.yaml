# AssistantMD Settings Template
#
# This template seeds `system/settings.yaml` when no user configuration
# exists. Edit a copy under `system/settings.yaml` rather than this file.

settings:
  default_model:
    value: sonnet
    description: "Default model alias used in the chat UI and as fallback when @model is omitted in workflow and context templates."
    restart_required: false
  default_context_template:
    value: "default.md"
    description: "Default context template name for chat sessions (vault templates override system templates by name)."
    restart_required: false
  default_api_timeout:
    value: 120
    description: "Default timeout in seconds for external API calls."
    restart_required: false
  max_output_tokens:
    value: 0
    description: "Maximum output tokens for model responses. 0 = provider default. Increase if you experience errors on file_ops writes."
    restart_required: false
  auto_buffer_max_tokens:
    value: 10000
    description: "Automatically route tool output to a buffer variable when it exceeds this token count. 0 = disabled. Caution: very low values will increase tool churn and token usage. This setting is used to protect context window from massive tool outputs. buffer_ops tool is automatically enabled if this setting > 0."
    restart_required: false
  file_search_timeout_seconds:
    value: 10
    description: "Timeout in seconds for file_ops_safe search operations."
    restart_required: false
  routing_allowed_tools:
    value: []
    description: "The chat agent cannot route tool outputs to a buffer variable unless they are listed here. JSON array. E.g. [\"file_ops,safe\", \"web_search_duckduckgo\"]"
    restart_required: false
  chunking_max_images_per_prompt:
    value: 20
    description: "Maximum number of images that may be attached from chunked markdown inputs in a single prompt."
    restart_required: false
  chunking_max_image_mb_per_image:
    value: 5
    description: "Maximum size in MB for a single image attachment from chunked markdown inputs."
    restart_required: false
  chunking_max_image_mb_total:
    value: 100
    description: "Maximum total MB allowed for all chunked image attachments in a single prompt."
    restart_required: false
  chunking_allow_remote_images:
    value: false
    description: "Allow remote image URLs in markdown chunking (currently ref-only behavior; no download/attach)."
    restart_required: false
  debug:
    value: false
    description: "Enable verbose API error responses. Restart required."
    restart_required: true
  logfire:
    value: false
    description: "Enable Logfire telemetry when LOGFIRE_TOKEN is set."
    restart_required: false
  piston_base_url:
    value: "https://emkc.org/api/v2/piston"
    description: "Piston API base URL. Default value is the free public endpoint. Override for self-hosted or proxied endpoints."
    restart_required: false
  ingestion_pdf_default_strategies:
    value:
      - pdf_text
      - pdf_ocr
    description: "Available strategies and priority for PDF ingestion. JSON array. Remove value to disable or reorder as needed. E.g. [\"pdf_ocr\"] will force all imports through OCR."
    restart_required: false
  ingestion_ocr_model:
    value: "mistral-ocr-latest"
    description: "Model used for ingestion OCR extraction."
    restart_required: false
  ingestion_ocr_endpoint:
    value: "https://api.mistral.ai/v1/ocr"
    description: "HTTP endpoint for ingestion OCR extraction."
    restart_required: false
  ingestion_ocr_capture_images:
    value: false
    description: "When true, request OCR image payloads and persist them as assets during ingestion."
    restart_required: false
  ingestion_image_default_strategies:
    value:
      - image_ocr
    description: "Available strategies and priority for image ingestion. JSON array. Remove value to disable or reorder as needed."
    restart_required: false
  ingestion_output_path_pattern:
    value: "Imported/"
    description: "Vault-relative path where imports are written."
    restart_required: false
  ingestion_url_fetch_backend:
    value: "curl"
    description: "URL ingestion backend. Currently only curl is supported. DO NOT CHANGE."
    restart_required: false
  ingestion_url_connect_timeout_seconds:
    value: 10
    description: "Connection timeout in seconds for URL ingestion HTTP requests. Increase if you get timeout errors on large URL imports."
    restart_required: false
  ingestion_url_read_timeout_seconds:
    value: 20
    description: "Read timeout in seconds for URL ingestion HTTP requests. Increase if you get timeout errors on large URL imports."
    restart_required: false
  ingestion_worker_interval_seconds:
    value: 120
    description: "How often the ingestion worker runs (seconds)."
    restart_required: true
  ingestion_worker_batch_size:
    value: 5
    description: "Number of ingestion jobs to process per worker run."
    restart_required: true

models:
  gemini:
    provider: google
    model_string: gemini-2.5-pro
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  gemini-flash:
    provider: google
    model_string: gemini-2.5-flash
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  gemini-flash-lite:
    provider: google
    model_string: gemini-2.5-flash-lite
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  sonnet:
    provider: anthropic
    model_string: claude-sonnet-4-5
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  opus:
    provider: anthropic
    model_string: claude-opus-4-1
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  haiku:
    provider: anthropic
    model_string: claude-haiku-4-5
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  gpt:
    provider: openai
    model_string: gpt-5
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  gpt-mini:
    provider: openai
    model_string: gpt-5-mini
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  gpt-nano:
    provider: openai
    model_string: gpt-5-nano
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  grok:
    provider: grok
    model_string: grok-4
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  grok-mini:
    provider: grok
    model_string: grok-3-mini
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  mistral-large:
    provider: mistral
    model_string: mistral-large-latest
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  mistral-small:
    provider: mistral
    model_string: mistral-small-latest
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  mistral-medium:
    provider: mistral
    model_string: mistral-medium-latest
    capabilities: ["text", "vision"]
    description: null
    user_editable: true
  magistral-medium:
    provider: mistral
    model_string: magistral-medium-latest
    capabilities: ["text"]
    description: null
    user_editable: true
  magistral-small:
    provider: mistral
    model_string: magistral-small-latest
    capabilities: ["text"]
    description: null
    user_editable: true

providers:
  google:
    api_key: GOOGLE_API_KEY
    base_url: null
    user_editable: false
  grok:
    api_key: GROK_API_KEY
    base_url: null
    user_editable: false
  anthropic:
    api_key: ANTHROPIC_API_KEY
    base_url: null
    user_editable: false
  openai:
    api_key: OPENAI_API_KEY
    base_url: null
    user_editable: false
  mistral:
    api_key: MISTRAL_API_KEY
    base_url: null
    user_editable: false
  lm_studio:
    api_key: LM_STUDIO_API_KEY
    base_url: LM_STUDIO_BASE_URL
    user_editable: true
  ollama:
    api_key: OLLAMA_API_KEY
    base_url: OLLAMA_BASE_URL
    user_editable: true

tools:
  web_search_tavily:
    module: core.tools.web_search_tavily
    description: "Web search using Tavily. API key required."
    requires_secrets:
      - TAVILY_API_KEY
    user_editable: false
  web_search_duckduckgo:
    module: core.tools.web_search_duckduckgo
    description: "Web search using DuckDuckGo"
    requires_secrets: []
    user_editable: false
  file_ops_safe:
    module: core.tools.file_ops_safe
    description: "Read, write, append, list, search"
    requires_secrets: []
    user_editable: false
  buffer_ops:
    module: core.tools.buffer_ops
    description: "Read-only buffer inspection (list, info, peek, read, search)"
    requires_secrets: []
    user_editable: false
  file_ops_unsafe:
    module: core.tools.file_ops_unsafe
    description: "Edit, delete, move/overwrite (use with caution)"
    requires_secrets: []
    user_editable: false
  tavily_extract:
    module: core.tools.tavily_extract
    description: "Extract content from specific URLs. API key required."
    requires_secrets:
      - TAVILY_API_KEY
    user_editable: false
  tavily_crawl:
    module: core.tools.tavily_crawl
    description: "Crawl and extract content from multiple pages. API key required."
    requires_secrets:
      - TAVILY_API_KEY
    user_editable: false
  code_execution:
    module: core.tools.code_execution_piston
    description: "Multi-language code execution via Piston API"
    requires_secrets: []
    user_editable: false
  workflow_run:
    module: core.tools.workflow_run
    description: "List and run workflows in the current vault"
    requires_secrets: []
    user_editable: false
